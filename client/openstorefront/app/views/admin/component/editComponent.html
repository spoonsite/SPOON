<!DOCTYPE html>
<!--
Copyright 2015 Space Dynamics Laboratory - Utah State University Research Foundation.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<h2>&nbsp;&nbsp;<i class="fa fa-edit"></i>&nbsp;{{editModeText}}<button type="submit" class="btn btn-primary pull-right" style="margin-right: 15px;" ng-click="close()" ><i class="fa fa-close"></i>&nbsp;Close</button></h2>
<hr>
<div  id="componentWindowDiv"  style="padding-left: 15px; padding-right: 15px;">
  <loader trigger="generalFormLoader"></loader>
  <tabset type="pills">
    <tab heading="General">
      <hr>
      General and required information on a component.<br><br>
      <button class="btn btn-primary pull-right" ng-click="setupModal(componentForm.componentId, 'A')"><i class="fa fa-cog"></i>&nbsp;Integrations</button>  
      <div class="alert-warning" style="color: black; font-size: 18px; text-align: center;" ng-show="flags.showIntegrationBanner">
        Data is being partially managed by an Integration. {{integration.integrationText}}
      </div>
      <form class="form-horizontal" name='componentUIForm' role="form"  ng-submit="saveComponent()" style="padding-left: 10px; padding-right: 10px;">
        <div class="form-group">
          <label class="col-sm-2 control-label text-right">Last Activity Date </label><span style="display: inline-block; padding: 7px 20px;">&nbsp;{{componentForm.lastActivityDts | date:'MM/dd/yyyy h:mm:ss a'}}</span>
        </div>
        <div class="form-group required"  >
          <label class=" col-sm-2 control-label required">Name</label>
          <div class="col-sm-10">
            <input  type="text"                 
            id="name"                         
            name="name"                         
            class="form-control" 
            ng-model="componentForm.name" 
            ng-minlength=1
            ng-maxlength=250 
            required 
            ng-focus />
          </div>
          <p style="text-align:center" ng-show="componentUIForm.name.$error.minlength && !componentUIForm.name.$focused" class="help-block">Name must be longer than 1 character in length.</p>
          <p style="text-align:center" ng-show="componentUIForm.name.$error.required && !componentUIForm.name.$focused" class="help-block">Name is required.</p>
        </div>      
        <div class="form-group required" show-errors >
          <label class="col-sm-2 control-label required">Description</label>
          <div class="col-sm-10">
            <textarea ckeditor="editorOptions" id="description" name="description" required  class="col-sm-10" style="height: 100px;" ng-model="componentForm.description" ng-watch="editorContentWatch"></textarea>        
          </div>
          <p style="text-align:center" ng-show="componentUIForm.description.$error.required && !componentUIForm.description.$focused" class="help-block">Description is required.</p>
        </div>
        <div class="form-group" show-errors >
          <label class="col-sm-2 control-label">Parent Component</label>
          <div class="col-sm-10">
            <select type="text" class="form-control" id="parentComponentId" ng-model="componentForm.parentComponentId" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="comp.code as comp.description for comp in parentComponents" placeholder="Select Component"></select>
          </div>  
        </div>  
        <div class="form-group"  >
          <label class="col-sm-2 control-label " title="External Id">GUID</label>       
          <div class="col-sm-10">
            <input  type="text"                 
            id="guid"                         
            name="guid"                         
            class="form-control" 
            ng-model="componentForm.guid" 
            ng-minlength=1
            ng-maxlength=40               
            ng-focus />
          </div>  
        </div>  
        <div class="form-group required"  >
          <label class="col-sm-2 control-label">Organization</label>       
          <div class="col-sm-10">
            <type-ahead
            type="text"                 
            id="organization"                         
            name="organization"                         
            ng-model="componentForm.organization" 
            ng-minlength=1
            ng-maxlength=120
            callback="business.orgTypeahead"
            statement="key.description as key.description for key in typeahead | looseFilter:$viewValue | limitTo:8"
            required 
            ng-focus>
          </type-ahead>
          <p style="text-align:center" ng-show="componentUIForm.organization.$error.minlength && !componentUIForm.organization.$focused" class="help-block">Organization must be longer than 1 character in length.</p>
          <p style="text-align:center" ng-show="componentUIForm.organization.$error.required && !componentUIForm.organization.$focused" class="help-block">Organization is required.</p>
        </div>  
      </div>  
      <div class="form-group"  >
        <label class="col-sm-2 control-label">Release Date</label>
        <div class="col-sm-10">
          <input type="text"  class="form-control" style="display:inline-block;" data-date-format="MM/dd/yyyy" data-start-view="0" data-min-view="0" autoclose="true" ng-model="componentForm.releaseDate" id="releaseDate"  placeholder="Date" data-date-type="number" bs-datepicker>         
        </div>  
      </div>  
      <div class="form-group"  >
        <label class="col-sm-2 control-label">Version</label>       
        <div class="col-sm-10">
          <input  type="text"                 
          id="version"                          
          name="version"                          
          class="form-control" 
          ng-model="componentForm.version" 
          ng-minlength=0
          ng-maxlength=255                
          ng-focus />
        </div>  
      </div>  
      <div class="form-group required" show-errors >
        <label class="col-sm-2 control-label required">Approval State</label>
        <div class="col-sm-10">
          <select smartselect type="text" class="form-control" name="approvalStatus" id="approvalStatus" required  ng-change="loadComponentAttributesView()" ng-model="componentForm.approvalState" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.description for status in approvalStatuses">
            <option style="display:none" value="">Select a Type</option>
          </select>          
          {{componentForm.approvedDts | date:'MM/dd/yyyy h:mm a'}}&nbsp; {{componentForm.approvedUser}}
          <p style="text-align:center" ng-show="componentUIForm.approvalStatus.$error.required && !componentUIForm.approvalStatus.$focused" class="help-block">Approval State is required.</p>

        </div>        
      </div>
      <div class="form-group required" show-errors >
        <label class="col-sm-2 control-label required">Component Type</label>
        <div class="col-sm-10">
          <select smartselect type="text" class="form-control" name="componentType" id="componentType" required  ng-change="loadComponentAttributesView()" ng-model="componentForm.componentType" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.description for status in componentTypes">
            <option style="display:none" value="">Select a Type</option>
          </select>
          <p style="text-align:center" ng-show="componentUIForm.componentType.$error.required && !componentUIForm.componentType.$focused" class="help-block">Component Type is required.</p>
        </div>        
      </div>        
      <div class="form-group" show-errors >
        <label class="col-sm-2 control-label">Security Type</label>
        <div class="col-sm-10">
          <select smartselect type="text" class="form-control" id="component_securityType" name="securityType" ng-model="componentForm.securityMarkingType" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.description for status in securityTypes">
            <option style="display:none" value="">Select a Type</option>
          </select>
        </div>        
      </div>        
      <div class="form-group">
        <label class="col-sm-2 control-label">User Submitted Date</label>
        <div class="col-sm-10">  
          <p ng-show="componentForm.submittedDts">
            {{componentForm.submittedDts | date:'MM/dd/yyyy h:mm a'}}
          </p>
          <p ng-show="!componentForm.submittedDts"style="padding-top: 8px;">
           Not User Submitted
         </p>
       </div>        
     </div>
     <div class="form-group">
      <label class="col-sm-2 control-label">Notify of Approval Email</label>
      <div class="col-sm-10">
        <input  type="text"                 
        id="notifyOfApprovalEmail"                          
        name="notifyOfApprovalEmail"                          
        class="form-control" 
        ng-model="componentForm.notifyOfApprovalEmail" 
        ng-pattern="EMAIL_REGEXP"  
        ng-minlength=0
        ng-maxlength=255                
        ng-focus /> 
      </div>        
    </div>  
    <div ng-show="submitter" class="col-sm-offset-2 col-sm-10" style="margin-bottom: 10px;">
      <button type="button" class="btn btn-default" ng-click="sendToSubmitter()"><i class="fa fa-envelope-o"></i>&nbsp;Message Submitter</button>
    </div>    
    <hr>
    <h3>Required Attributes</h3>
    <table class="table table-striped table-bordered admin-table">
      <tr>
        <th>Attribute Type</th>
        <th>Attribute Code</th>         
      </tr>
      <tr ng-repeat="attrib in requiredAttributes | orderBy:'description'" >
        <td><span class="required">{{attrib.description}}</span></td>
        <td>
          <select type="text" class="form-control" style="width: 100%" ng-model="generalForm.requiredAttribute[attrib.attributeType]" id="{{generalForm.requiredAttribute[attrib.attributeType]}}" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="code.code as code.label for code in getCodesForType(attrib.attributeType)" placeholder="Select Code"></select>
        </td>          
      </tr>         
    </table>      
    <hr>      
    <button type="submit" class="btn btn-primary" ng-disabled="componentUIForm.$invalid" ><i class="fa fa-save"></i>&nbsp;Save</button> 
  </form>       
</tab>
<tab heading="Attributes" ng-show="editMode">
  <hr>
  Attributes are filterable metadata about the component.<br><br>
  <div>
    <loader trigger="attributeFormLoader"></loader>
    <panel class-list="edges" open-state="true" title="Add Attribute">
      <form class="form-horizontal" id="attributeUIForm" name='attributeUIForm' role="form"  ng-submit="saveAttribute()" style="padding-left: 10px; padding-right: 10px;">
        <div class="form-group required" show-errors >
          <label class="control-label col-sm-2">Attribute Type</label>
          <div class="col-sm-10">
            <select smartselect type="text" class="form-control" name="attributeType" id="attributeType" required ng-model="attributeForm.type" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="attribute.attributeType as attribute.description for attribute in allAttributes" placeholder="Select Type">
              <option style="display:none" value="">Select a Type</option>
            </select>
            <p ng-show="attributeUIForm.attributeType.$error.required && !attributeUIForm.attributeType.$focused" class="help-block">Attribute Type is required.</p>
          </div>  
        </div>  
        <div class="form-group required" show-errors >
          <label class="col-sm-2 control-label">Attribute Code</label>
          <div class="col-sm-10">
            <select type="text" class="form-control"  name="attributeCode" id="attributeCode"  required ng-model="attributeForm.code" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="code.code as code.label for code in getCodesForType(attributeForm.type)" placeholder="Select Code"></select>
            <p ng-show="attributeUIForm.attributeCode.$error.required && !attributeUIForm.attributeCode.$focused" class="help-block">Attribute Code is required.</p>              
          </div>  
        </div>       
        <div class="col-sm-12 col-sm-offset-2">
          <button type="submit" class="btn btn-primary" ng-disabled="attributeUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;{{attributeForm.saveText}}</button>
          <a id="lnkCancelSave" ng-href=""  name="cancelSave" ng-click="cancelEdit('attributeForm')" ng-show="attributeForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a> 
        </div>
      </form>
    </panel>          
  </div>
  <div> 
    <br>
    Filter Status:
    <select type="text" class="form-control"  ng-change="loadComponentAttributesView()" style="width:110px;display: inline" ng-model="componentAttributeViewQueryFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
    <button class="btn btn-default" ng-click="loadComponentAttributesView()"><i class="fa fa-refresh"></i>&nbsp;Refresh</button>
  </div>  
  <table class="table table-striped table-bordered admin-table">
    <tr>
      <th><a href="" ng-click="setPredicate('typeDescription', 'attribute');">Attribute Type <span ng-show="predicate['attribute'] === 'typeDescription'"><i ng-show="!reverse['attribute']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['attribute']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th>Attribute Code</th>         
      <th>Orphan</th>                 
      <th>Security</th>                 
      <th>Action</th>
    </tr>
    <tr ng-repeat="attribute in componentAttributesView | orderBy:predicate['attribute']:reverse['attribute']" >
      <td>{{attribute.typeDescription}}</td>
      <td>{{attribute.codeDescription}}</td>          
      <td>{{attribute.orphan}}</td>                               
      <td>{{attribute.securityMarkingDescription}}</td>
      <td style="padding: 0px 3px !important;">&nbsp;           
        <button class="btn btn-warning btn-sm" ng-click="toggleAttributeStatus(attribute);"  title="Toggle Status"><i class="fa fa-power-off"></i></button> 
        <button class="btn btn-danger btn-sm" ng-click="deleteAttribute(attribute);"  title="Delete Attribute"><i class="fa fa-trash"></i></button>   
      </td>
    </tr>
  </table>
</tab>
<tab heading="Relationships" ng-show="editMode">
  <hr>
  Relationships are graphable connections between components.<br><br>
  <div>
    <loader trigger="relationshipFormLoader"></loader>
    <panel class-list="edges" open-state="true" title="Add Relationship">
      <form class="form-horizontal" name='relationshipUIForm' role="form"  ng-submit="saveRelationship()" style="padding-left: 10px; padding-right: 10px;">
        <div class="form-group required" show-errors >
          <label class="control-label col-sm-2">Relationship Type</label>
          <div class="col-sm-10">
            <select smartselect type="text" class="form-control" name="relationshipType" id="relationshipType" required ng-model="relationshipForm.type" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="relationship.code as relationship.description for relationship in relationshipTypes" placeholder="Select Type">
              <option style="display:none" value="">Select a Type</option>
            </select>
            <p ng-show="relationshipUIForm.relationshipType.$error.required && !relationshipUIForm.relationshipType.$focused" class="help-block">relationship Type is required.</p>
          </div>  
        </div>  
        <div class="form-group required" show-errors >
          <label class="col-sm-2 control-label">Relationship Target</label>
          <div class="col-sm-10">
            <select smartselect type="text" class="form-control" name="relationshipTarget" id="relationshipTarget" required ng-model="relationshipForm.target" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="component.component.componentId as component.component.name for component in allComponents" placeholder="Select Component">
              <option style="display:none" value="">Select a Component</option>
            </select>
            <p ng-show="relationshipUIForm.relationshipTarget.$error.required && !relationshipUIForm.relationshipTarget.$focused" class="help-block">Relationship Target is required.</p>
          </div>  
        </div>
        <div class="form-group" show-errors >
          <label class="col-sm-2 control-label">Security Type</label>
          <div class="col-sm-10">
            <select smartselect type="text" class="form-control" id="relationship_securityType" name="securityType" ng-model="relationshipForm.securityMarkingType" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.description for status in securityTypes">
              <option style="display:none" value="">Select a Type</option>
            </select>
          </div>        
        </div> 
        <div class="col-sm-12 col-sm-offset-2" ng-show="!relationshipUIForm.$invalid">
          Relationship preview: {{componentForm.name}} &mdash; {{getRelationship(relationshipForm.type)}} &mdash; {{getComponentName(relationshipForm.target)}}
        </div>
        <div class="col-sm-12 col-sm-offset-2">
          <button type="submit" class="btn btn-primary" ng-disabled="relationshipUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;{{relationshipForm.saveText}}</button>
          <a id="lnkCancelSave" ng-href=""  name="cancelSave" ng-click="cancelEdit('relationshipForm')" ng-show="relationshipForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a> 
        </div>
      </form>
    </panel>          
  </div>
  <div>
    <br>
    Filter Status:
    <select type="text" class="form-control"  ng-change="loadComponentRelationshipsView()" style="width:110px;display: inline" ng-model="componentRelationshipViewQueryFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
    <button class="btn btn-default" ng-click="loadComponentRelationshipsView()"><i class="fa fa-refresh"></i>&nbsp;Refresh</button>
  </div>
  <table class="table table-striped table-bordered admin-table">
    <tr>
      <th><a href="" ng-click="setPredicate('ownerComponentName', 'relationship');">Relationship Owner <span ng-show="predicate['relationship'] === 'ownerComponentName'"><i ng-show="!reverse['relationship']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['relationship']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th><a href="" ng-click="setPredicate('relationshipTypeDescription', 'relationship');">Relationship Type <span ng-show="predicate['relationship'] === 'relationshipTypeDescription'"><i ng-show="!reverse['relationship']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['relationship']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th><a href="" ng-click="setPredicate('targetComponentName', 'relationship');">Relationship Target <span ng-show="predicate['relationship'] === 'targetComponentName'"><i ng-show="!reverse['relationship']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['relationship']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th><a href="" ng-click="setPredicate('securityMarkingDescription', 'relationship');">Security Type <span ng-show="predicate['relationship'] === 'securityMarkingDescription'"><i ng-show="!reverse['relationship']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['relationship']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th>Action</th>
    </tr>
    <tr ng-repeat="relationship in componentRelationshipsView | orderBy:predicate['relationship']:reverse['relationship']" >
      <td>{{relationship.ownerComponentName}}</td>
      <td>{{relationship.relationshipTypeDescription}}</td>
      <td>{{relationship.targetComponentName}}</td>
      <td>{{relationship.securityMarkingDescription}}</td>
      <td style="padding: 0px 3px !important;">&nbsp;
        <button class="btn btn-danger btn-sm" ng-click="deleteRelationship(relationship);"  title="Delete Relationship"><i class="fa fa-trash"></i></button>
      </td>
    </tr>
  </table>
</tab>
<tab heading="Contacts" ng-show="editMode">
  <hr>
  Point of contacts for component.<br><br>
  <div id="contactManagementDivId">
    <loader trigger="contactFormLoader"></loader>
    <panel class-list="edges" open-state="true" title="Add/Edit Contact">
      <form class="form-horizontal" name='contactUIForm' role="form"  ng-submit="saveContact()" style="padding-left: 10px; padding-right: 10px;">
        <input type="hidden" ng-model="contactForm.contactId" name="contactId" id="contactId" />
        <div class="form-group required" show-errors >
          <label class="col-sm-2 control-label required">Contact Type</label>
          <div class="col-sm-10">
            <select type="text" name="contactType" id="contactType" class="form-control" required  ng-model="contactForm.contactType" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="code.code as code.description for code in contactTypes" placeholder="Select Type"></select>
          </div>
          <p ng-show="contactUIForm.contactType.$error.required && !contactUIForm.contactType.$focused" class="help-block">Contact Type is required.</p>
        </div>
        <div class="form-group required"  >
          <label class="col-sm-2 control-label required">First Name</label>
          <div class="col-sm-10">
            <input  type="text"                   
            id="firstName"                          
            name="firstName"                          
            class="form-control" 
            ng-model="contactForm.firstName" 
            ng-minlength=1
            ng-maxlength=200
            required 
            ng-focus />
          </div>
          <p ng-show="contactUIForm.firstName.$error.minlength && !contactUIForm.firstName.$focused" class="help-block">First Name must be longer than 1 character in length.</p>
          <p ng-show="contactUIForm.firstName.$error.required && !contactUIForm.firstName.$focused" class="help-block">First Name is required.</p>

        </div>
        <div class="form-group required"  >
          <label class="col-sm-2 control-label required">Last Name</label>
          <div class="col-sm-10">
            <input  type="text"                     
            id="lastName"                         
            name="lastName"                         
            class="form-control" 
            ng-model="contactForm.lastName" 
            ng-minlength=1
            ng-maxlength=200
            required 
            ng-focus />
          </div>
          <p ng-show="contactUIForm.lastName.$error.minlength && !contactUIForm.lastName.$focused" class="help-block">Last Name must be longer than 1 character in length.</p>
          <p ng-show="contactUIForm.lastName.$error.required && !contactUIForm.lastName.$focused" class="help-block">Last Name is required.</p>

        </div>
        <div class="form-group required"  >
          <label class="col-sm-2 control-label required">Organization</label>
          <div class="col-sm-10">
            <type-ahead
            type="text"                 
            id="organization"                         
            name="organization"                         
            ng-model="contactForm.organization" 
            ng-minlength=1
            ng-maxlength=120
            callback="business.orgTypeahead"
            statement="key.description as key.description for key in typeahead | looseFilter:$viewValue | limitTo:8"
            required 
            ng-focus>
          </type-ahead>
        </div>
        <p ng-show="contactUIForm.organization.$error.minlength && !contactUIForm.organization.$focused" class="help-block">Organization must be longer than 1 character in length.</p>
        <p ng-show="contactUIForm.organization.$error.required && !contactUIForm.organization.$focused" class="help-block">Organization is required.</p>
      </div>
      <div class="form-group"  >
        <label class="col-sm-2 control-label">Email</label>       
        <div class="col-sm-10">
          <input  type="text"             
          ng-pattern="EMAIL_REGEXP"                 
          id="email"                  
          name="email"                  
          class="form-control" 
          ng-model="contactForm.email"                   
          ng-maxlength=200 
          maxlength=200                   
          ng-focus /> 
        </div>
      </div>
      <div class="form-group"  >
        <label class="col-sm-2 control-label">Phone</label>       
        <div class="col-sm-10">
          <input  type="tel"                
          id="phone"                          
          name="phone"                          
          class="form-control" 
          ng-model="contactForm.phone" 
          ng-maxlength=200                  
          placeholder="xxx-xxx-xxxx"              
          ng-focus />
        </div>
      </div>
      <div class="form-group" show-errors >
        <label class="col-sm-2 control-label">Security Type</label>
        <div class="col-sm-10">
          <select smartselect type="text" class="form-control" id="contact_securityType" name="securityType" ng-model="contactForm.securityMarkingType" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.description for status in securityTypes">
            <option style="display:none" value="">Select a Type</option>
          </select>
        </div>        
      </div> 
      <button type="submit" class="btn btn-primary" ng-disabled="contactUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;{{contactForm.saveText}}</button>
      <a id="lnkCancelSave" ng-href=""  name="cancelSave" ng-click="cancelEdit('contactForm')" ng-show="contactForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a>
    </form>
  </panel>
</div>

<div>
  <br>
  Filter Status:
  <select type="text" class="form-control"  ng-change="loadContacts()" style="width:110px;display: inline" ng-model="contactQueryFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
  <button class="btn btn-default" ng-click="loadContacts()"><i class="fa fa-refresh"></i>&nbsp;Refresh</button>
</div>
<table class="table table-striped table-bordered admin-table">
  <tr>
    <th><a href="" ng-click="setPredicate('positionDescription', 'contacts');">Contact Type <span ng-show="predicate['contacts'] === 'positionDescription'"><i ng-show="!reverse['contacts']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['contacts']" class="fa fa-sort-alpha-desc"></i></span></a></th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Email</th>
    <th>Phone</th>
    <th>Organization</th>
    <th>Security Type</th>
    <th>Action</th>
  </tr>
  <tr ng-repeat="contact in contacts | orderBy:predicate['contacts']:reverse['contacts']" >
    <td>{{contact.positionDescription}}</td>
    <td>{{contact.firstName}}</td>
    <td>{{contact.lastName}}</td>
    <td>{{contact.email}}</td>
    <td>{{contact.phone}}</td>
    <td>{{contact.organization}}</td>
    <td>{{contact.securityMarkingDescription}}</td>
    <td style="padding:0px 3px !important; vertical-align: middle;">&nbsp;
      <button class="btn btn-default btn-sm" ng-click="editEntity('contactForm', contact);"  title="Edit"><i class="fa fa-edit"></i></button>
      <button class="btn btn-warning btn-sm" ng-click="toggleContactStatus(contact);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>
    </td>
  </tr>
</table>
</tab>
<tab heading="Resources" ng-show="editMode">
  <hr>
  Location of component artifacts<br><br>
  <div>
    <loader trigger="resourceFormLoader"></loader>
    <panel class-list="edges" open-state="true" title="Add/Edit Resource">
      <form class="form-horizontal" name='resourceUIForm' role="form"  ng-submit="saveResource()" style="padding-left: 10px; padding-right: 10px;">
        <div class="form-group required" show-errors >
          <label class="col-sm-2 control-label">Resource Type</label>
          <div class="col-sm-10">
            <select type="text" class="form-control" name="resourceType" id="resourceType" required ng-model="resourceForm.resourceType" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="code.code as code.description for code in resourceTypes" placeholder="Select Type"></select>
          </div>
          <p ng-show="resourceUIForm.resourceType.$error.required && !resourceUIForm.resourceType.$focused" class="help-block">Resource Type is required.</p>             
        </div>
        <div class="form-group"  >
          <label class="col-sm-2 control-label ">Description</label>
          <div class="col-sm-10">
            <input  type="text"                 
            name="description"                          
            id="description"                          
            class="form-control" 
            ng-model="resourceForm.description"                   
            ng-maxlength=250                  
            ng-focus />
          </div>
        </div>
        <div class="col-sm-offset-2 col-sm-10" style="margin-bottom: 15px;"  >
          <input type="checkbox" name="restricted" ng-model="resourceForm.restricted" class="" />&nbsp;<label class=" control-label">Restricted</label>
        </div>
        <div class="form-group"  >
          <label class="col-sm-2 control-label">Link</label>
          <div class="col-sm-10">
            <input  type="text"                   
            name="link"                         
            id="link"                         
            class="form-control" 
            ng-model="resourceForm.originalLink"                  
            ng-maxlength=250                  
            placeholder="http:///www.example.com/resource"
            ng-disabled="resourceForm.uploadInput"
            ng-focus />
          </div>
        </div>
        <div class="form-group" show-errors >
          <label class="col-sm-2 control-label">Security Type</label>
          <div class="col-sm-10">
            <select smartselect type="text" class="form-control" id="resource_securityType" name="securityType" ng-model="resourceForm.securityMarkingType" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.description for status in securityTypes">
              <option style="display:none" value="">Select a Type</option>
            </select>
          </div>        
        </div> 
        <div class="form-group"  >
          <label class="col-sm-2 control-label">Upload Local Resource</label>
          <div class="col-sm-10">
            <input type="file" nv-file-select onchange="utils.handleFileQueue(angular.element(this).scope().resourceUploader, this); angular.element(this).scope().setUploadInput('resourceUploader', 'resourceForm')" uploader="resourceUploader" name="uploadFile" width="100" ng-disabled="resourceForm.originalLink" />
          </div>
          <p class="help-block" ng-show="resourceForm.localResourceName">Current Local Resource: {{resourceForm.originalFileName}} ({{resourceForm.localResourceName}})</p>               
        </div>  
        <br>
        <button type="submit" class="btn btn-primary" ng-disabled="resourceUIForm.$invalid  || !(resourceForm.uploadInput || resourceForm.originalLink || resourceForm.localResourceName)"><i class="fa fa-save"></i>&nbsp;{{resourceForm.saveText}}</button>  
        <a id="lnkCancelSave" ng-href=""  name="cancelSave" ng-click="cancelResourceEdit()" ng-show="resourceForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a> 
      </form>       
    </panel>
  </div>
  <div>
    <br>
    Filter Status:
    <select type="text" class="form-control"  ng-change="loadResources()" style="width:110px;display: inline" ng-model="resourceQueryFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
    <button class="btn btn-default" ng-click="loadResources()"><i class="fa fa-refresh"></i>&nbsp;Refresh</button>
  </div>
  <table class="table table-striped table-bordered admin-table">
    <tr>
      <th><a href="" ng-click="setPredicate('key', 'resources');">Resource Type <span ng-show="predicate['resources'] === 'key'"><i ng-show="!reverse['resources']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['resources']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th>Description</th>
      <th>Link</th>
      <th>Mime Type</th>
      <th>Local Resource Name</th>
      <th>Restricted</th>
      <th>Security Type</th>
      <th>Action</th>
    </tr>
    <tr ng-repeat="resource in resources | orderBy:predicate['resources']:reverse['resources']" >
      <td>{{resource.resourceTypeDesc}}</td>
      <td>{{resource.description}}</td>
      <td>{{resource.originalLink}}</td>
      <td>{{resource.mimeType}}</td>
      <td><p ng-show="resource.localResourceName">{{resource.originalFileName}} ({{resource.localResourceName}})</p></td>
      <td>{{resource.restricted}}</td>
      <td>{{resource.securityMarkingDescription}}</td>
      <td style="padding:0px 3px !important; width: 125px; vertical-align: middle;">&nbsp;
        <button class="btn btn-default btn-sm" ng-click="editEntity('resourceForm', resource);"  title="Edit"><i class="fa fa-edit"></i></button>
        <button class="btn btn-warning btn-sm" ng-click="toggleResourceStatus(resource);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>
        <button class="btn btn-danger btn-sm" ng-click="deleteResource(resource);"  title="Delete"><i class="fa fa-trash"></i></button>
      </td>
    </tr>
  </table>
</tab>
<tab heading="Media" ng-show="editMode">
  <hr>
  Screenshots, video, other media for a component.<br><br>
  <loader trigger="mediaFormLoader"></loader>
  <panel class-list="edges" open-state="true" title="Add/Edit Media">
    <form class="form-horizontal" name='mediaUIForm' role="form"  ng-submit="saveMedia()" style="padding-left: 10px; padding-right: 10px;">
      <div class="form-group required" show-errors >            
        <label class="col-sm-2 control-label required">Media Type</label><br>
        <div class="col-sm-10">
          <select type="text" class="form-control" name="mediaTypeCode" required  ng-model="mediaForm.mediaTypeCode" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="code.code as code.description for code in mediaTypes" placeholder="Select Type"></select>
        </div>
        <p ng-show="mediaUIForm.mediaTypeCode.$error.required && !mediaUIForm.mediaTypeCode.$focused" class="help-block">Media Type is required.</p>
      </div>
      <div class="form-group"  >
        <label class="col-sm-2  control-label">Caption</label>
        <div class="col-sm-10">
          <input  type="text"                 
          id="caption"                          
          name="caption"                          
          class="form-control" 
          ng-model="mediaForm.caption" 
          ng-minlength=0
          ng-maxlength=250                
          ng-focus />
        </div>
      </div>
      <div class="form-group"  >
        <label class="col-sm-2  control-label">Upload Media</label>
        <div class="col-sm-10">
          <input type="file" nv-file-select onchange="utils.handleFileQueue(angular.element(this).scope().mediaUploader, this); angular.element(this).scope().setUploadInput('mediaUploader', 'mediaForm')" uploader="mediaUploader" name="uploadFile" width="100" ng-disabled="mediaForm.originalLink"/>
        </div>
        <p class="help-block" ng-show="mediaForm.fileName">Current Local Media: {{mediaForm.originalFileName}} ({{mediaForm.fileName}})</p>
      </div>
      <div class="form-group"  >
        <label class="col-sm-2  control-label">Link</label>
        <div class="col-sm-10">
          <input  type="text" 
          id="originalLink"                         
          name="originalLink"
          class="form-control" 
          placeholder="http:///www.example.com/image.png"
          ng-model="mediaForm.originalLink"
          ng-disabled="mediaForm.uploadInput"
          ng-minlength=0
          ng-maxlength=250
          ng-focus />
        </div>
      </div>
      <div class="form-group" show-errors >
        <label class="col-sm-2 control-label">Security Type</label>
        <div class="col-sm-10">
          <select smartselect type="text" class="form-control" id="media_securityType" name="securityType" ng-model="mediaForm.securityMarkingType" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.description for status in securityTypes">
            <option style="display:none" value="">Select a Type</option>
          </select>
        </div>        
      </div> 
      <button type="submit" class="btn btn-primary" ng-disabled="mediaUIForm.$invalid || !(mediaForm.uploadInput || mediaForm.originalLink || mediaForm.fileName)"><i class="fa fa-save"></i>&nbsp;{{mediaForm.saveText}}</button>
      <a  ng-href=""  name="cancelSave" ng-click="cancelMediaEdit()" ng-show="mediaForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a>
    </form>
  </panel>
  <div>
    <br>
    Filter Status:
    <select type="text" class="form-control"  ng-change="loadMedia()" style="width:110px;display: inline" ng-model="mediaQueryFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
    <button class="btn btn-default" ng-click="loadMedia()"><i class="fa fa-refresh"></i>&nbsp;Refresh</button>
  </div>
  <table class="table table-striped table-bordered admin-table">
    <tr>
      <th><a href="" ng-click="setPredicate('key', 'media');">Media Type <span ng-show="predicate['media'] === 'key'"><i ng-show="!reverse['media']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['media']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th>Caption</th>
      <th>Mime Type</th>
      <th>Local Media Name</th>
      <th>Link</th>
      <th>Security Type</th>
      <th>Action</th>
    </tr>
    <tr ng-repeat="mediaItem in media | orderBy:predicate['media']:reverse['media']" >
      <td>{{mediaItem.contentType}}</td>
      <td>{{mediaItem.caption}}</td>
      <td>{{mediaItem.mimeType}}</td>
      <td><p ng-show="mediaItem.fileName">{{mediaItem.originalFileName}} ({{mediaItem.fileName}})</p></td>
      <td>{{mediaItem.originalLink}}</td>
      <td>{{mediaItem.securityMarkingDescription}}</td>
      <td style="padding:0px 3px !important; vertical-align: middle;">&nbsp;
        <button class="btn btn-default btn-sm" ng-click="editEntity('mediaForm', mediaItem);"  title="Edit"><i class="fa fa-edit"></i></button>
        <button class="btn btn-warning btn-sm" ng-click="toggleMediaStatus(mediaItem);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>
        <button class="btn btn-danger btn-sm" ng-click="deleteMedia(mediaItem);"  title="Delete"><i class="fa fa-trash"></i></button>
      </td>
    </tr>
  </table>
</tab>
<tab heading="Dependencies" ng-show="editMode">
  <hr>
  External dependences for a component<br><br>
  <loader trigger="dependencyFormLoader"></loader>
  <panel class-list="edges" open-state="true" title="Add/Edit Dependency">
    <form class="form-horizontal" name='dependancyUIForm' role="form"  ng-submit="saveDependancy()" style="padding-left: 10px; padding-right: 10px;">
      <div class="form-group required"  >
        <label class="col-sm-2 control-label required">Name</label>
        <div class="col-sm-10">
          <input  type="text" 
          id="name"                         
          name="name"                         
          class="form-control" 
          ng-model="dependencyForm.dependencyName" 
          ng-minlength=1
          ng-maxlength=250
          required 
          ng-focus />
        </div>
        <p ng-show="dependancyUIForm.name.$error.minlength && !dependancyUIForm.name.$focused" class="help-block">Name must be longer than 1 character in length.</p>
        <p ng-show="dependancyUIForm.name.$error.required && !dependancyUIForm.name.$focused" class="help-block">Name is required.</p>
      </div>
      <div class="form-group required"  >
        <label class="col-sm-2 control-label required">Version</label>
        <div class="col-sm-10">

          <input  type="text"             
          id="version"                          
          name="version"                          
          class="form-control" 
          ng-model="dependencyForm.version" 
          ng-minlength=1
          ng-maxlength=250
          required 
          ng-focus />
        </div>
        <p ng-show="dependancyUIForm.version.$error.minlength && !dependancyUIForm.version.$focused" class="help-block">Version must be longer than 1 character in length.</p>
        <p ng-show="dependancyUIForm.version.$error.required && !dependancyUIForm.version.$focused" class="help-block">Version is required.</p>
      </div>
      <div class="form-group"  >
        <label class="col-sm-2 control-label">External Link</label>
        <div class="col-sm-10">
          <input  type="text"             
          id="dependancyReferenceLink"                          
          name="dependancyReferenceLink"                          
          class="form-control" 
          placeholder="http://www.example.com"
          ng-model="dependencyForm.dependancyReferenceLink" 
          ng-minlength=0
          ng-maxlength=250            
          ng-focus />
        </div>
      </div>        
      <div class="form-group"  >
        <label class="col-sm-2 control-label">Comment</label>
        <div class="col-sm-10">
          <input  type="text"             
          id="comment"                          
          name="comment"                          
          class="form-control" 
          ng-model="dependencyForm.comment" 
          ng-minlength=0
          ng-maxlength=250          
          ng-focus />
        </div>  
      </div>
      <button type="submit" class="btn btn-primary" ng-disabled="dependancyUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;{{dependencyForm.saveText}}</button>  
      <a id="lnkCancelSave" ng-href=""  name="cancelSave" ng-click="cancelEdit('dependencyForm')" ng-show="dependencyForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a>
    </form>
  </panel>
  <div>
    <br>
    Filter Status:
    <select type="text" class="form-control"  ng-change="loadDependancies()" style="width:110px;display: inline" ng-model="dependencyFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
    <button class="btn btn-default" ng-click="loadDependancies()"><i class="fa fa-refresh"></i>&nbsp;Refresh</button>
  </div>
  <table class="table table-striped table-bordered admin-table">
    <tr>
      <th><a href="" ng-click="setPredicate('dependencyName', 'depend');">Name <span ng-show="predicate['depend'] === 'dependencyName'"><i ng-show="!reverse['depend']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['depend']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th>Version</th>
      <th>Link</th>
      <th>Comment</th>
      <th>Action</th>
    </tr>
    <tr ng-repeat="depend in dependencies | orderBy:predicate['depend']:reverse['depend']" >
      <td>{{depend.dependencyName}}</td>
      <td>{{depend.version}}</td>
      <td>{{depend.dependancyReferenceLink}}</td>
      <td>{{depend.comment}}</td>
      <td style="padding:0px 3px !important; width: 90px; vertical-align: middle;">&nbsp;
        <button class="btn btn-default btn-sm" ng-click="editEntity('dependencyForm', depend);"  title="Edit"><i class="fa fa-edit"></i></button>
        <button class="btn btn-warning btn-sm" ng-click="toggleDependancyStatus(depend);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>
      </td>
    </tr>
  </table>
</tab>
<tab heading="Metadata" ng-show="editMode">
  <hr>
  Extra non-filterable information about a component.<br><br>
  <loader trigger="metadataFormLoader"></loader>
  <panel class-list="edges" open-state="true" title="Add/Edit Metadata">
    <form class="form-horizontal" name='metadataUIForm' role="form"  ng-submit="saveMetadata()" style="padding-left: 10px; padding-right: 10px;">
      <div class="form-group required"  >
        <label class="col-sm-2 control-label required">Label</label>
        <div class="col-sm-10">
          <input  type="text"                 
          id="label"                          
          name="label"                          
          class="form-control" 
          ng-model="metadataForm.label" 
          ng-minlength=1
          ng-maxlength=250
          required 
          ng-focus />
        </div>
        <p ng-show="metadataUIForm.label.$error.minlength && !metadataUIForm.label.$focused" class="help-block">Label must be longer than 1 character in length.</p>
        <p ng-show="metadataUIForm.label.$error.required && !metadataUIForm.label.$focused" class="help-block">Label is required.</p>
      </div>
      <div class="form-group required"  >
        <label class="col-sm-2 control-label required">Value</label>
        <div class="col-sm-10">
          <input  type="text"                 
          id="value"                          
          name="value"                          
          class="form-control" 
          ng-model="metadataForm.value" 
          ng-minlength=1
          ng-maxlength=250
          required 
          ng-focus />
        </div>
        <p ng-show="metadataUIForm.value.$error.minlength && !metadataUIForm.value.$focused" class="help-block">Value must be longer than 1 character in length.</p>
        <p ng-show="metadataUIForm.value.$error.required && !metadataUIForm.value.$focused" class="help-block">Value is required.</p>
      </div>
      <div class="form-group" show-errors >
        <label class="col-sm-2 control-label">Security Type</label>
        <div class="col-sm-10">
          <select smartselect type="text" class="form-control" id="metadata_securityType" name="securityType" ng-model="metadataForm.securityMarkingType" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.description for status in securityTypes">
            <option style="display:none" value="">Select a Type</option>
          </select>
        </div>        
      </div> 
      <button type="submit" class="btn btn-primary" ng-disabled="metadataUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;{{metadataForm.saveText}}</button>
      <a id="lnkCancelSave" ng-href=""  name="cancelSave" ng-click="cancelEdit('metadataForm')" ng-show="metadataForm.edit"><span style="color:blue; vertical-align: bottom; cursor:pointer;">Cancel</span></a>
    </form>
  </panel>
  <div>
    <br>
    Filter Status:
    <select type="text" class="form-control"  ng-change="loadMetadata()" style="width:110px;display: inline" ng-model="metadataFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
    <button class="btn btn-default" ng-click="loadMetadata()"><i class="fa fa-refresh"></i>&nbsp;Refresh</button>
  </div>
  <table class="table table-striped table-bordered admin-table">
    <tr>
      <th><a href="" ng-click="setPredicate('Label', 'meta');">Label<span ng-show="predicate['meta'] === 'key'"><i ng-show="!reverse['meta']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['meta']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th>Value</th>
      <th>Security Type</th>
      <th>Action</th>
    </tr>
    <tr ng-repeat="meta in metadata | orderBy:predicate['meta']:reverse['meta']" >
      <td>{{meta.label}}</td>
      <td>{{meta.value}}</td>
      <td>{{meta.securityMarkingDescription}}</td>
      <td style="padding:0px 3px !important; width: 90px; vertical-align: middle;">&nbsp;
        <button class="btn btn-default btn-sm" ng-click="editEntity('metadataForm', meta);"  title="Edit"><i class="fa fa-edit"></i></button>
        <button class="btn btn-warning btn-sm" ng-click="toggleMetadataStatus(meta);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>
      </td>
    </tr>
  </table>
</tab>
<tab heading="Evaluation Information" ng-show="editMode">
  <hr>
  Evaluation scoring information<br><br>
  <loader trigger="evaluationLoader"></loader>
  <button type="submit" class="btn btn-danger" ng-click="clearAllEvaluationSections()"><i class="fa fa-trash"></i>&nbsp;Clear All Sections</button>
  <div ng-show="evaluationForm.oldSections">
    <h3>Old Evaluation Sections</h3>
    <table class="table table-striped table-bordered admin-tabel">
      <tr>
        <th><a href="" ng-click="setPredicate('key', 'oldeval');">Section Name <span ng-show="predicate['oldeval'] === 'key'"><i ng-show="!reverse['oldeval']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['oldeval']" class="fa fa-sort-alpha-desc"></i></span></a></th>
        <th>Score</th>
        <th>Action</th>
      </tr>
      <tr ng-repeat="section in oldSections | orderBy:predicate['oldeval']:reverse['oldeval']" >
        <td>{{section.name}}</td>
        <td>
          <input  type="number" 
          name="score"
          id="score"
          class="form-control"
          ng-model="section.score" 
          max=5
          min=1
          ng-focus />
        </td>
        <td style="padding:0px 3px !important; width: 90px; vertical-align: middle;">&nbsp;
          <button class="btn btn-primary btn-sm" ng-click="saveEvalSection(section);"  title="Save"><i class="fa fa-save"></i></button>
          <button class="btn btn-danger btn-sm" ng-click="removeEvaluationSection(section);"  title="Remove"><i class="fa fa-trash"></i></button>
        </td>
      </tr>
    </table>
  </div>

  <h3>Available Evaluation Sections</h3>
  <button style="display:inline-block;" ng-disabled="predicate['eval'] === 'sortOrder'" class="btn btn-default" ng-click="setPredicate('sortOrder', 'eval');"><span class="fa-stack fa-lg" style="margin: -6px 0px; font-size:14px">
    <i class="fa fa-sort fa-stack-1x"></i>
    <i class="fa fa-ban fa-stack-2x text-danger"></i>
  </span>&nbsp;Clear Sort</button>
  <table class="table table-striped table-bordered admin-table">
    <tr>
      <th><a href="" ng-click="setPredicate('name', 'eval');">Section Name <span ng-show="predicate['eval'] === 'name'"><i ng-show="!reverse['eval']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['eval']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th>Not Available</th>
      <th>Score</th>
      <th>Existing</th>
      <th>Action</th>
    </tr>
    <tr ng-repeat="section in sections | orderBy:predicate['eval']:reverse['eval']" >
      <td>{{section.name}}</td>
      <td style="width: 100px; padding: 4px 3px !important;" align="center">
        <input type="checkbox" ng-model="section.notAvailable" />
      </td>
      <td style="width: 100px; padding: 3px 3px !important;">
        <input  type="text" 
        name="score"
        id="evaluationSectionScore"
        ng-disabled="section.notAvailable"
        class="form-control"
        ng-model="section.actualScore" 
        onkeypress='return utils.isNumberKey(event, true, $(this).val())'
        onpaste="return false;"          
        ng-blur="checkEvalScore(section);"
        max=5
        min=1
        style="height:24px;"
        ng-focus />
      </td>
      <td style="width: 75px;" align="center"><i class="fa" ng-class="section.activeStatus === 'A' ? 'fa-check' : ''"></td>
      <td style="padding:0px 3px !important; vertical-align: middle;">&nbsp;
        <button class="btn btn-danger btn-sm" ng-click="removeEvaluationSection(section);"  title="Remove"><i class="fa fa-trash"></i></button>
      </td>
    </tr>
  </table>
  <button class="btn btn-primary" ng-click="saveAllEvalSections();"  title="Save"><i class="fa fa-save"></i>&nbsp;Save All</button>

</tab>
<tab heading="Reviews" ng-show="editMode">
  <hr>
  User Reviews<br><br>
  <loader trigger="reviewFormLoader"></loader>
  <div>
    <br>
    Filter Status:
    <select type="text" class="form-control"  ng-change="loadReviews()" style="width:110px;display: inline" ng-model="reviewFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
    <button class="btn btn-default" ng-click="loadReviews()"><i class="fa fa-refresh"></i>&nbsp;Refresh</button>
  </div>
  <table class="table table-striped table-bordered admin-table">
    <tr>
      <th><a href="" ng-click="setPredicate('title', 'review');">Title<span ng-show="predicate['review'] === 'title'"><i ng-show="!reverse['review']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['review']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th>Rating</th>
      <th>Comment</th>
      <th>Pros</th>
      <th>Cons</th>
      <th>User</th>
      <th>Update Date</th>
      <th>Security Type</th>
      <th>Action</th>
    </tr>
    <tr ng-repeat="review in reviews | orderBy:predicate['review']:reverse['review']" >
      <td>{{review.title}}</td>
      <td>{{review.rating}}</td>
      <td>{{review.comment | limitTo: 500}}</td>
      <td>
        <ul>
          <li ng-repeat="pro in review.pros">
            {{pro.text}}
          </li>
        </ul>
      </td>
      <td>
        <ul>
          <li ng-repeat="con in review.cons">
            {{con.text}}
          </li>
        </ul>
      </td>
      <td>{{review.username}}</td>
      <td>{{review.updateDate | date:'MM/dd/yyyy h:mm:ss.sss a'}}</td>
      <td>{{review.securityMarkingDescription}}</td>
      <td style="padding:0px 3px !important; vertical-align: middle;">&nbsp;
        <button class="btn btn-warning btn-sm" ng-click="toggleReviewStatus(review);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>
      </td>
    </tr>
  </table>
</tab>
<tab heading="Questions" ng-show="editMode">
  <hr>
  User questions and answers<br><br>
  <loader trigger="questionFormLoader"></loader>
  <div>
    <br>
    Filter Status:
    <select type="text" class="form-control"  ng-change="loadQuestions()" style="width:110px;display: inline" ng-model="questionFilter.status" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.desc for status in statusFilterOptions"></select>
    <button class="btn btn-default" ng-click="loadQuestions()"><i class="fa fa-refresh"></i>&nbsp;Refresh</button>
  </div>
  <table class="table table-striped table-bordered admin-table">
    <tr>
      <th><a href="" ng-click="setPredicate('question', 'question');">Question<span ng-show="predicate['question'] === 'question'"><i ng-show="!reverse['question']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['question']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th><a href="" ng-click="setPredicate('username', 'question');">Username<span ng-show="predicate['question'] === 'username'"><i ng-show="!reverse['question']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['question']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th><a href="" ng-click="setPredicate('userType', 'question');">User Type<span ng-show="predicate['question'] === 'userType'"><i ng-show="!reverse['question']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['question']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th><a href="" ng-click="setPredicate('organization', 'question');">Organization<span ng-show="predicate['question'] === 'organization'"><i ng-show="!reverse['question']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['question']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th><a href="" ng-click="setPredicate('updateDts', 'question');">Update Date<span ng-show="predicate['question'] === 'updateDts'"><i ng-show="!reverse['question']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['question']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th><a href="" ng-click="setPredicate('securityMarkingType', 'question');">Security Type<span ng-show="predicate['question'] === 'securityMarkingType'"><i ng-show="!reverse['question']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['question']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th>Action</th>
    </tr>
    <tr ng-repeat-start="question in questions | orderBy:predicate['question']:reverse['question']">
      <td>{{question.question}}</td>
      <td>{{question.username}}</td>
      <td>{{question.userType}}</td>
      <td>{{question.organization}}</td>
      <td>{{question.questionUpdateDts | date:'MM/dd/yyyy h:mm:ss.sss a'}}</td>
      <td>{{question.securityMarkingDescription}}</td>
      <td style="padding:0px 3px !important; width: 90px; vertical-align: middle;">&nbsp;
        <button class="btn btn-default btn-sm" ng-click="showQuestionResponses(question);"  title="ShowResponse">{{questionDetailsShow[question.questionId].showResponsesText}} Responses</button>
        <button class="btn btn-warning btn-sm" ng-click="toggleQuestionStatus(question);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>
      </td>
    </tr>
    <tr ng-show="questionDetailsShow[question.questionId].flag" ng-repeat-end>
      <td colspan="6" style="padding: 10px">
        <table class="table table-striped table-bordered admin-table">
          <tr>
            <th><a href="" ng-click="setPredicate('response', 'questionResponse');">Response<span ng-show="predicate['questionResponse'] === 'response'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>
            <th><a href="" ng-click="setPredicate('username', 'questionResponse');">Username<span ng-show="predicate['questionResponse'] === 'username'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>
            <th><a href="" ng-click="setPredicate('userType', 'questionResponse');">User Type<span ng-show="predicate['questionResponse'] === 'userType'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>
            <th><a href="" ng-click="setPredicate('organization', 'questionResponse');">Organization<span ng-show="predicate['questionResponse'] === 'organization'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>
            <th><a href="" ng-click="setPredicate('updateDts', 'questionResponse');">Update Date<span ng-show="predicate['questionResponse'] === 'updateDts'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>
            <th><a href="" ng-click="setPredicate('securityMarkingType', 'questionResponse');">Security Type<span ng-show="predicate['questionResponse'] === 'securityMarkingType'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>
            <th><a href="" ng-click="setPredicate('activeStatus', 'questionResponse');">Active Status<span ng-show="predicate['questionResponse'] === 'activeStatus'"><i ng-show="!reverse['questionResponse']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['questionResponse']" class="fa fa-sort-alpha-desc"></i></span></a></th>
            <th>Action</th>
          </tr>
          <tr ng-repeat="response in question.responses | orderBy:predicate['questionResponse']:reverse['questionResponse']">
            <td>{{response.response}}</td>
            <td>{{response.username}}</td>
            <td>{{response.userType}}</td>
            <td>{{response.organization}}</td>
            <td>{{response.updateDts | date:'MM/dd/yyyy h:mm:ss.sss a'}}</td>
            <td>{{response.securityMarkingDescription}}</td>
            <td align="center">{{response.activeStatus}}</td>
            <td style="padding:0px 3px !important; vertical-align: middle;">&nbsp;
              <button class="btn btn-warning btn-sm" ng-click="toggleQuestionResponseStatus(response, question);"  title="Toggle Status"><i class="fa fa-power-off"></i></button>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</tab>
<tab heading="Tags" ng-show="editMode">
  <hr>
  Component searchable labels.<br><br>
  <loader trigger="tagFormLoader"></loader>
  <panel class-list="edges" open-state="true" title="Add Tag">
    <form class="form-horizontal" name='tagUIForm' role="form"  ng-submit="saveTag()" style="padding-left: 10px; padding-right: 10px;">
      <div class="form-group required"  >
        <label class="col-sm-2 control-label required">Tag</label>
        <div class="col-sm-10">
          <input  type="text"                 
          id="text"                         
          name="text"                         
          class="form-control" 
          ng-model="tagForm.text" 
          ng-minlength=1
          ng-maxlength=250
          required 
          ng-focus />
        </div>
        <p ng-show="tagUIForm.text.$error.minlength && !tagUIForm.text.$focused" class="help-block">Tag must be longer than 1 character in length.</p>
        <p ng-show="tagUIForm.text.$error.required && !tagUIForm.text.$focused" class="help-block">Tag is required.</p>
      </div>
      <div class="form-group" show-errors >
        <label class="col-sm-2 control-label">Security Type</label>
        <div class="col-sm-10">
          <select smartselect type="text" class="form-control" id="tags_securityType" name="securityType" ng-model="tagForm.securityMarkingType" data-min-length="0" data-html="1" data-animation="am-flip-x" ng-options="status.code as status.description for status in securityTypes">
            <option style="display:none" value="">Select a Type</option>
          </select>
        </div>        
      </div> 
      <button type="submit" class="btn btn-primary" ng-disabled="tagUIForm.$invalid"><i class="fa fa-save"></i>&nbsp;Add</button>
    </form>
  </panel>
  <div>
    <br>
    <button class="btn btn-default" ng-click="loadTags()"><i class="fa fa-refresh"></i>&nbsp;Refresh</button>
  </div>
  <table class="table table-striped table-bordered admin-table">
    <tr>
      <th><a href="" ng-click="setPredicate('text', 'tag');">Tag<span ng-show="predicate['tag'] === 'text'"><i ng-show="!reverse['tag']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['tag']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th><a href="" ng-click="setPredicate('securityMarkingType', 'tag');">Security Type<span ng-show="predicate['tag'] === 'securityMarkingType'"><i ng-show="!reverse['tag']" class="fa fa-sort-alpha-asc"></i><i ng-show="reverse['tag']" class="fa fa-sort-alpha-desc"></i></span></a></th>
      <th>Action</th>
    </tr>
    <tr ng-repeat="tag in tags | orderBy:predicate['tag']:reverse['tag']" >
      <td>{{tag.text}}</td>
      <td>{{tag.securityMarkingDescription}}</td>
      <td style="padding:0px 3px !important; vertical-align: middle;">&nbsp;
        <button class="btn btn-danger btn-sm" ng-click="removeTag(tag);"  title="Remove"><i class="fa fa-trash"></i></button>
      </td>
    </tr>
  </table>
</tab>
</tabset>
</div>
<hr>
<br>
<br>
<div style="position: absolute; right: 0px; bottom: 15px; padding-right: 20px; ">
  <button type="submit" class="btn btn-primary" ng-click="close()"><i class="fa fa-close"></i>&nbsp;Close</button>
</div>