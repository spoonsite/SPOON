+++
title = "System"
description = ""
weight = 120
+++

![Menu button to get to System](/images/AppAdmin/SystemLocation.png)

## Table of Contents

![Diagram of main System sub-page](/images/AppAdmin/SystemMapping.png)

1. [Error Tickets](/applicationadmin/system/#error-tickets)
1. [Application State Properties](/applicationadmin/system/#application-state-properties)
1. [System Configuration Properties](/applicationadmin/system/#system-configuration-properties)
1. [Logs and Logging](/applicationadmin/system/#logs-and-logging)
1. [Plugins](/applicationadmin/system/#plugins)
1. [Cache](/applicationadmin/system/#cache)
1. [Search Control](/applicationadmin/system/#search-control)
1. [Recent Changes Email](/applicationadmin/system/#recent-changes-email)
1. [Managers](/applicationadmin/system/#managers)
1. [Heap Memory](/applicationadmin/system/#heap-memory)
1. [Memory Pools](/applicationadmin/system/#memory-pools)
1. [Garbage Collection](/applicationadmin/system/#garbage-collection)

The System Page gives the Admin a great deal of insight into how the application is functioning during runtime, if the Admin has a good
background in servers already. Additionally, cache management, error reporting, Spoon's search configuration options, and many configuration options in general are also found on the System page.

Note that on this page, and every sub-page of the System page, the "Refresh" button ![Refresh Button](/images/AppAdmin/RefreshButton.png) does nothing but send a new request to the server for the sub-page displayed - it does not edit or 'refresh' any data object selected at the time.

On the left three sub-sub-tab options can be seen:

1. On the first page the Admin lands on - the "**Status**" page - general environment variables are displayed. The "**Automatically Update: Yes / No**" switch at the top of the sub-page turns on constant checks to the server in order to provide a picture of the site's vital statistics in real time.

2. Threads Status:
   Every incoming request to the server is received by a thread, and here the operational status of each one is visible; "**View**" shows an extended log
3. System Properties
   A list of non-editable properties relating to the java environment (version 8) and server (Tomcat).

### Error Tickets

This is a valuable page that lists errors generated during runtime of the Site. When Spoon users see get an error that on their screens looks like this:

![Example Spoon Error](/images/AppAdmin/submitError.JPG)

Then, a full stack trace of the error that was thrown in that incident will be viewable here. This log is primarily for the stack trace from errors of the severity that they are reported to regular users. For a more comprehensive error log, see the [Logs and Logging](/applicationadmin/system/#logs-and-logging) sub-page. The "**View Details**" button gives us the stack trace, where places where the traces goes through Spoon's files is highlighted in yellow. This is helpful for developers who need to recreate a bug.

### Application State Properties

A list of editable configuration settings for the application.

### System Configuration Properties

A list of editable configuration settings for the application. This page is more valuable to the Systems Admin, but the Application Admin may find use in the settings here related to setting up the mail server, for email.

### Logs and Logging

1. Logger Levels
   Spoon's codebase is in Java, and Java encapsulates groups of files with related purposes into what are known as 'packages'. Here all the Java packages are displayed, and the Admin has the ability to adjust how verbose the logs generated by each one are. Select a package and click edit to see the verbosity levels that it can be set to.

2. Logs
   Logs generated by the site. Files in the stack trace that are part of Spoon's codebase are enlarged for emphasis to the person watching.
   The "**Database Logger**" switch, as the name implies, toggles logging on or off on the server.

### Plugins

Spoon was built with the capacity to run site plugins on the fly. The org.apache.felix.framework was implemented as a plugin for modularity but
because it is necessary for the functioning of the site it is marked as a "Core Module" and cannot be downloaded or stopped. "**Download**" downloads the .jar file of the plugin.

If you are interested in creating your own plugins for Spoon, there is an example plugin that you can start developing off of in the Spoon repository in the file path server `openstorefront/openstorefront-plugin/example/src/main/java/edu/usu/sdl/example/Activator.java`

### Cache

Data is cached on Spoon to speed up search, user profiles, etc. The trade-off of this strategy is that sometimes newly added content cannot be seen immediately by Spoon users. If Spoon users add a new component with a new attribute, with new attribute codes, tags, organizations, and contacts, and then cannot see these newly added data in search results or other places, the culprit could be that their newly-added content did not make it into a cache.

The Admin can force some caches on Spoon to "**Flush Cache**", which will slow down the time it takes for Spoon to return search results and other data queries,
but new data queries will be sent directly to Spoon's database, where the newest, most up to date data is stored. Every time a user queries Spoon for data and Spoon cannot find that data in the cache, after sending the query to the database Spoon will then store the results of that query into the cache so that the next time any other user makes the same query it "hits" the cache instead. The instances when a user's query is not in the cache is named a "miss".

When using the "**Flush Cache**" feature, notice that it eliminates the "Rough Count" of items in a cache. Some caches, however, are used so frequently (or even by the Flush Cache feature itself), that it appears as though flushing only reduces the rough count down to 1. This is because the cache is being flushed, and then re-indexes itself immediately, so that the Admin cannot visually verify that the cache was completely erased; however a full flush did occur.

The Hit Ratio is calculated by the number of hits divided by requests (Hits plus Misses), rounded up. Because some caches preemptively fill themselves with more results that just the particular ones a user initially requested, it is not atypical for a cache to be at 100%.

### Search Control

"**Re-index Listings**" updates Elasticsearch with all approved and active parts from the database. This will take awhile, around a minute. You must re-index when starting SPOON, updating Elasticsearch, or restarting Elasticsearch. If this is not done, searching will not work.

### Recent Changes Email

This sub-page will enable you to send to yourself a simple email noting the number of Components (Spoon parts) that have been touched/edited by either the system or a user within the time range specified by you. Touches by the system could include anything from a Admin user using the Admin Tools>Data Management>Entries page to open and edit a Component, or the server moving Components in the database without user supervision.

In Spoon v2.11, the interval between emails is set in configuration files to be every 28 days. If you need to edit this setting, you will have to manually change the config file at `server\openstorefront\openstorefront-core\common\src\main\java\edu\usu\sdl\openstorefront\common\util\OpenStorefrontConstant.java` . There is no user interface for this particular setting.

Contact your System Admin if you need further support.

### Managers

Managers are Java services, or more specifically, Java singleton objects that are responsible for serving up data to the application. You can safely "**Restart**" Managers to try and fix odd behavior on the site (should you need it). "**Stop**\ing" a Manager is dangerous, because every Manager is integral to running some or another part of the site.

### Heap Memory

You can see more about what heap memory is at [https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html](https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html)

### Memory Pools

For more information on how Java handles memory, see [https://docs.oracle.com/database/121/CNCPT/memory.htm#CNCPT007](https://docs.oracle.com/database/121/CNCPT/memory.htm#CNCPT007)

### Garbage Collection

See the link above for Heap Memory and Memory Pools.
