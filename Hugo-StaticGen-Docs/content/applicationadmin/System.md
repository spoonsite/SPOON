+++
title = "The System Page"
description = ""
weight = 2
+++
 
 Everything you need to know about the System page.

[__What do I do if SPOON's search isn't working?__](/applicationadmin/system/#SearchControl)   \
[__I tried re-indexing and SPOON's search still isn't working, what should I do?__](/applicationadmin/system/#Cache)
[__How can I see the error messages my users are seeing?__](/applicationadmin/system/#ErrorTickets) \
[__What are Plugins on Spoon?__](/applicationadmin/system/#Plugins) \
[__What do these statics on the Systems page mean?__](/applicationadmin/system/#HeapMemory)

  <!--more-->\

 ![Menu button to get to System](/images/AppAdmin/SystemLocation.png)

## The System Page and it's many sub-children
 ![Diagram of main System sub-page](/images/AppAdmin/SystemMapping.png)

The System Page gives the Admin a great deal of insight into how the application is functioning during runtime, if the Admin has a good
background in servers already. Additionally, cache management, error reporting, Spoon's search configuration options, and many configuration options in general are also found on the System page. 

Note that on this page, and every sub-page of the System page, the "Refresh" button ![Refresh Button](/images/AppAdmin/RefreshButton.png) does nothing but send a new request to the server for the sub-page displayed - it does not edit or 'refresh' any data object selected at the time. 

On the left three sub-sub-tab options can be seen:

1. On the first page the Admin lands on - the "__Status__" page - general environment variables are displayed. The "__Automatically Update: Yes / No__" switch at the top of the sub-page turns on constant checks to the server in order to provide a picture of the site's vital statistics in real time. 

2. Threads Status:
        Every incoming request to the server is received by a thread, and here the operational status of each one is visible; "__View__" shows an extended log
3. System Properties
        A list of non-editable properties relating to the java environment (version 8) and server (Tomcat).


<a name="ErrorTickets"></a>

### 1 - Error Tickets
This is a valuable page that lists errors generated during runtime of the Site. When Spoon users see get an error that on their screens looks like this: ![Example Spoon Error](/images/AppAdmin/submitError.JPG)

Then, a full stack trace of the error that was thrown in that incident will be viewable here. This log is primarily for the stack trace from errors of the severity that they are reported to regular users. For a more comprehensive error log, see the [Logs and Logging](LogsAndLogging) sub-page. The "__View Details__" button gives us the stack trace, where places where the traces goes through Spoon's files is highlighted in yellow. This is helpful for developers who need to recreate a bug.


### 2 - Application State Properties
A list of editable configuration settings for the application.

### 3 - System Configuration Properties 
A list of editable configuration settings for the application. This page is more valuable to the Systems Admin, but the Application Admin may find use in the settings here related to setting up the mail server, for email.

<a name="LogsAndLogging"></a>

### 4 - Logs and Logging 

1. Logger Levels
    Spoon's codebase is in Java, and Java encapsulates groups of files with related purposes into what are known as 'packages'. Here all the Java packages are displayed, and the Admin has the ability to adjust how verbose the logs generated by each one are. Select a package and click edit to see the verbosity levels that it can be set to. 
2. Logs
    Logs generated by the site. Files in the stack trace that are part of Spoon's codebase are enlarged for emphasis to the person watching.
    The "__Database Logger__" switch, as the name implies, toggles logging on or off on the server. 


<a name="Plugins"></a>

### 5 - Plugins 
Spoon was built with the capacity to run site plugins on the fly. The org.apache.felix.framework was implemented as a plugin for modularity but
because it is necessary for the functioning of the site it is marked as a "Core Module" and cannot be downloaded or stopped. "__Download__" downloads the .jar file of the plugin. 

If you are interested in creating your own plugins for Spoon, there is an example plugin that you can start developing off of in the Spoon repository in the file path server `openstorefront/openstorefront-plugin/example/src/main/java/edu/usu/sdl/example/Activator.java`


<a name="Cache"></a>

### 6 - Cache
Data is cached on Spoon to speed up search, user profiles, etc. The trade-off of this strategy is that sometimes newly added content cannot be seen immediately by Spoon users. If Spoon users add a new component with a new attribute, with new attribute codes, tags, organizations, and contacts, and then cannot see these newly added data in search results or other places, the culprit could be that their newly-added content did not make it into a cache. 

The Admin can force some caches on Spoon to "__Flush Cache__", which will slow down the time it takes for Spoon to return search results and other data queries,
but new data queries will be sent directly to Spoon's database, where the newest, most up to date data is stored. Every time a user queries Spoon for data and Spoon cannot find that data in the cache, after sending the query to the database Spoon will then store the results of that query into the cache so that the next time any other user makes the same query it "hits" the cache instead. The instances when a user's query is not in the cache is named a "miss". 


When using the "__Flush Cache__" feature, notice that it eliminates the "Rough Count" of items in a cache. Some caches, however, are used so frequently (or even by the Flush Cache feature itself), that it appears as though flushing only reduces the rough count down to 1. This is because the cache is being flushed, and then re-indexes itself immediately, so that the Admin cannot visually verify that the cache was completely erased; however a full flush did occur. 

The Hit Ratio is calculated by the number of hits divided by requests (Hits plus Misses), rounded up. Because some caches preemptively fill themselves with more results that just the particular ones a user initially requested, it is not atypical for a cache to be at 100%. 

<a name="SearchControl"></a>
### 7 - Search Control

"__Re-Index Listing__" pushes Spoon's general search component, ElasticSearch, to cache itself with all the components from the Spoon database. If a component, attribute, tag, or organization is not in ElasticSearch, that that item will never appear in search results (regardless of what is in the database). 

*Up to version v2.11 of SPoon you must manually turn this on yourself every time the application is started/restarted*. It is imperative that you re-index the search options upon start up of Spoon; otherwise search is not operative.

### 8 - Recent Changes E-mail
This sub-page will enable you to send to yourself a simple email noting the number of Components (Spoon parts) that have been touched/edited by either the system or a user within the time range specified by you. Touches by the system could include anything from a Admin user using the Admin Tools>Data Management>Entries page to open and edit a Component, or the server moving Components in the database without user supervision.

In Spoon v2.11, the interval between emails is set in configuration files to be every 28 days. If you need to edit this setting, you will have to manually change the config file at `server\openstorefront\openstorefront-core\common\src\main\java\edu\usu\sdl\openstorefront\common\util\OpenStorefrontConstant.java` . There is no user interface for this particular setting. 

Contact your System Admin if you need further support. 
  
### 9 - Managers
Managers are Java services, or more specifically, Java singleton objects that are responsible for serving up data to the application. You can safely "__Restart__" Managers to try and fix odd behavior on the site (should you need it). "__Stop__\ing" a Manager is dangerous, because every Manager is integral to running some or another part of the site. *Usually* it is safe to stop a Manager, and then restart it if one does not navigate away from this sub-page.

The "__Restart Application__" button shuts the restarts the application without turning on or off the Tomcat server that the application runs on. __Warning!__ This feature has had known bugs in prior releases of Spoon where restarting the application caused it to fail and not come back on again. If the System Admin has access to the production server, it is safer to restart Tomcat directly then to use this feature. This feature was originally implemented to give the Application Admin the option to restart Spoon in instances where the production server was not accessible. 

<a name="HeapMemory"></a>

### 10 - Heap Memory 
You can see more about what heap memory is at [https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html](https://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html)

### 11 - Memory Pools
For more infomration on how Java handles memory, see [https://docs.oracle.com/database/121/CNCPT/memory.htm#CNCPT007](https://docs.oracle.com/database/121/CNCPT/memory.htm#CNCPT007)

### 12 - Garbage College
See the link above for Heap Memory and Memory Pools.
